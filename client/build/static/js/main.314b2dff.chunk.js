(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{19:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},26:function(e,t,n){e.exports=n(39)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),c=n.n(o),i=(n(31),n(3)),l=n(2),s=n(5),u=n(4),m=(n(32),n(11)),b=n(6),v=n(41),f=n(1),d=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this;this._subscription=Object(f.subscribe)((function(t){e.setState(t)}),this.filterState.bind(this));var t=this.filterState(Object(f.getState)());if(!Object(v.a)(t))throw new Error("The result of filterState() must be an object");this.setState(t)}},{key:"componentWillUnmount",value:function(){Object(f.unsubscribe)(this._subscription)}},{key:"filterState",value:function(){throw new Error("filterState() is not implemented")}}]),n}(r.a.Component),h=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-header"},r.a.createElement("h1",null,this.props.title))}}]),n}(r.a.Component),p=function(){Object(f.setState)("cookie",!1),Object(f.setState)("currentUser",null),Object(f.setState)("loginForm",{name:"",password:""}),Object(f.setState)("movieForm",{name:"",location:'"Location"',bluray:!1,dvd:!1}),Object(f.setState)("addMovieForm",{name:"",location:'"Location"',bluray:!1,dvd:!1}),Object(f.setState)("locationForm",{location:'"Location"'}),Object(f.setState)("locationList",[]),Object(f.setState)("movieList",[]),Object(f.setState)("deletedMovieList",[]),Object(f.setState)("imdbInfo",{})},j=function(){fetch("/locations").then((function(e){if(200===e.status)return e.json()})).then((function(e){e=e.map((function(e){return e.name}));var t=['"Location"'].concat(e);Object(f.setState)("locationList",t)})).catch((function(e){alert(e)}))},E=function(e){var t=e.name,n=e.value;Object(f.setState)("loginForm.".concat(t),n)},y=function(e){var t=e.className,n=e.name,a=e.value;Object(f.setState)("".concat(t,".").concat(n),a)},O=function(e){var t=e.className,n=e.name,a=e.checked;Object(f.setState)("".concat(t,".").concat(n),a)},g=function(){Object(f.setState)("movieList",[])},S=function(){var e=prompt("Please enter location to delete","");if(null!=e)if(""!==e&&'"Location"'!==e){var t=new Request("/deleteLocation",{method:"delete",body:JSON.stringify({loc:e}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(e){if(500!==e.status)return e.status,e.json();alert("there was a server error, sorry :(")})).then((function(t){if("message"in t)alert(t.message);else{var n=Object(f.getState)("locationList");Object(f.setState)("locationList",n.filter((function(t){return t!==e})))}})).catch((function(e){alert(e)}))}else alert("Enter a proper location")},N=function(){var e=prompt("Please enter new location name","");if(null!=e)if(""!==e&&'"Location"'!==e){var t=new Request("/createLocation",{method:"post",body:JSON.stringify({loc:e}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(t){if(500===t.status)alert("make sure the new location doesn't already exist");else{var n=Object(f.getState)("locationList");Object(f.setState)("locationList",n.concat([e]))}}),(function(e){alert(e)}))}else alert("Enter a proper location")},L=function(){var e=Object(f.getState)("movieForm"),t=""===e.name?"-":e.name,n='"Location"'===e.location?"-":e.location,a=e.blu?"Y":"-",r=e.dvd?"Y":"-";fetch("/movies/"+t+"/"+n+"/"+a+"/"+r).then((function(e){if(500!==e.status)return e.json();alert("there was a server error, sorry :(")})).then((function(e){Object(f.setState)("movieList",e)})).catch((function(e){alert(e)}))},k=function(){var e=Object(f.getState)("locationForm");'"Location"'===e.location?alert("Please select a location"):fetch("/movies/-/"+e.location+"/-/-").then((function(e){if(500!==e.status)return e.json();alert("there was a server error, sorry :(")})).then((function(e){Object(f.setState)("movieList",e)})).catch((function(e){alert(e)}))},w=function(){Object(f.setState)("addMovieForm",{name:"",location:'"Location"',bluray:!1,dvd:!1})},C=(n(19),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.movie,t=new Date(e.datedel),n=("0"+t.getDate()).slice(-2),a=("0"+(t.getMonth()+1)).slice(-2),o=t.getFullYear(),c=t.getHours();c<10&&(c="0"+c);var i=t.getMinutes();i<10&&(i="0"+i);var l=t.getSeconds();return l<10&&(l="0"+l),r.a.createElement("li",null,r.a.createElement("div",{className:"jumbotron col-sm-12 pull-center"},r.a.createElement("p",null,"Title: ",e.name),r.a.createElement("p",null,"Location: ",e.location),r.a.createElement("p",null,"Bluray: ",e.bluray?"Yes":"No"," "),r.a.createElement("p",null,"DVD: ",e.dvd?"Yes":"No"),r.a.createElement("p",null,"Date Deleted: ",o+"-"+a+"-"+n+" "+c+":"+i+":"+l," "),r.a.createElement("button",{class:"btn btn-primary rec",onClick:function(t){return function(e){var t=new Request("/delmovies/"+e,{method:"put",body:JSON.stringify({}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(t){if(200===t.status){var n=Object(f.getState)("deletedMovieList");Object(f.setState)("deletedMovieList",n.filter((function(t){return t._id!==e})))}return t.json()})).then((function(e){"message"in e&&alert(e.message)})).catch((function(e){alert(e)}))}(e._id)}}," Recover "),r.a.createElement("button",{class:"btn btn-primary del",onClick:function(t){return function(e){if("yes"===prompt("Are you sure (type yes)","")){var t=new Request("/delmovies/"+e,{method:"delete",body:JSON.stringify({}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(t){if(200===t.status){var n=Object(f.getState)("deletedMovieList");Object(f.setState)("deletedMovieList",n.filter((function(t){return t._id!==e})))}return t.json()})).then((function(e){"message"in e&&alert(e.message)})).catch((function(e){alert(e)}))}}(e._id)}}," Delete ")))}}]),n}(r.a.Component)),F=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.movies;return r.a.createElement("div",{id:"mainDiv",class:"container row"},r.a.createElement("ul",{className:"col-sm-12 pull-center moviesList"},e.map((function(e){return r.a.createElement(C,{key:e._id,movie:e})}))))}}]),n}(r.a.Component),M=(n(33),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),fetch("/delmovies").then((function(e){if(200===e.status)return e.json()})).then((function(e){Object(f.setState)("deletedMovieList",e)})).catch((function(e){alert(e)})),a}return Object(l.a)(n,[{key:"filterState",value:function(e){return{deletedMovieList:e.deletedMovieList}}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this.state.deletedMovieList;return r.a.createElement("div",{className:"container"},r.a.createElement(h,{title:"Deleted Movies"}),r.a.createElement(m.b,{to:"/main",className:"btn btn-primary ret"}," Return ")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F,{movies:e}))}}]),n}(d)),D=(n(21),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.classNam,a=e.val;return r.a.createElement("select",{className:n,name:"location",value:a,onChange:function(e){return y(e.target)}},t.map((function(e){return r.a.createElement("option",{value:e},e)})))}}]),n}(r.a.Component)),x=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),j(),a}return Object(l.a)(n,[{key:"filterState",value:function(e){return{locationList:e.locationList,imdbInfo:e.imdbInfo,movieList:e.movieList,addMovieForm:e.addMovieForm}}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.locationList,n=e.addMovieForm;return r.a.createElement("div",{className:"container"},r.a.createElement(h,{title:"Add Movie"}),r.a.createElement("div",{className:"container row"},r.a.createElement("div",{className:"jumbotron col-sm-12 pull-center"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=new Request("/addMovie",{method:"post",body:JSON.stringify(Object(f.getState)("addMovieForm")),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(e){if(200===e.status)return e.json();alert("there was a server error, sorry :(")})).then((function(e){w(),alert("Added Movie\nName: "+e.name+"\nLocation: "+e.location+"\nbluray: "+e.bluray+" dvd: "+e.dvd)})).catch((function(e){alert(e)}))}(e)}},r.a.createElement("p",null,r.a.createElement("label",null," Movie Name: "),r.a.createElement("br",null),r.a.createElement("input",{className:"addMovieForm",name:"name",type:"text",value:n.name,onChange:function(e){return y(e.target)}}),r.a.createElement("br",null),r.a.createElement("label",null," Location: "),r.a.createElement("br",null),r.a.createElement(D,{classNam:"addMovieForm",locations:t,val:n.location}),r.a.createElement("br",null),r.a.createElement("label",null," ",r.a.createElement("input",{type:"checkbox",checked:n.bluray,className:"addMovieForm",onChange:function(e){return O(e.target)},name:"bluray"})," Bluray "),r.a.createElement("label",null," ",r.a.createElement("input",{type:"checkbox",checked:n.dvd,className:"addMovieForm",onChange:function(e){return O(e.target)},name:"dvd"})," DVD "),r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Add Movie"}),r.a.createElement("input",{className:"btn btn-primary",onClick:w,value:"Clear Movie Form"}),r.a.createElement(m.b,{to:"/main",className:"btn btn-primary"}," Cancel "))))))}}]),n}(d),A=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).props.history.push("/"),a}return Object(l.a)(n,[{key:"filterState",value:function(e){return{loginForm:e.loginForm}}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this.state.loginForm;return r.a.createElement("div",{className:"container"},r.a.createElement(h,{title:"Authentication"}),r.a.createElement("div",{className:"container row align-self-center"},r.a.createElement("div",{className:"jumbotron col-sm-4"},r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault();var t=new Request("/loginUser",{method:"post",body:JSON.stringify(Object(f.getState)("loginForm")),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(e){return e.json()})).then((function(e){void 0!==e.currentUser?Object(f.setState)("currentUser",e.currentUser):alert("Invalid name or password")})).catch((function(e){alert("something went wrong :(")}))}(e)}},r.a.createElement("div",null,r.a.createElement("label",null,"Name:")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"name",value:e.name,onChange:function(e){return E(e.target)}})),r.a.createElement("div",null,r.a.createElement("label",null,"Password:")," ",r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",value:e.password,onChange:function(e){return E(e.target)}}))," ",r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Log In"}))))))}}]),n}(d),B=(n(22),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.movie;return r.a.createElement("li",{className:"movieList"},"Title: "+e.name,r.a.createElement("button",{className:"imdb",onClick:function(t){return n=e.name,void fetch("/imdb/"+n).then((function(e){if(200===e.status)return e.json();alert("there was a server error, sorry :(")})).then((function(e){Object(f.setState)("imdbInfo",e),window.scrollTo(0,0)})).catch((function(e){alert(e)}));var n}}," IMDB "),r.a.createElement("br",null),"Location: "+e.location,r.a.createElement("br",null),"Bluray: "+(e.bluray?"Yes":"No"),r.a.createElement("button",{className:"delete",onClick:function(t){return function(e){if("yes"===prompt("Are you sure (type yes)","")){var t=new Request("/movies/"+e,{method:"delete",body:JSON.stringify({}),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}});fetch(t).then((function(e){if(500!==e.status)return e.json();alert("there was a server error, sorry :(")})).then((function(t){var n=Object(f.getState)("movieList");Object(f.setState)("movieList",n.filter((function(t){return t._id!==e})))})).catch((function(e){alert(e)}))}}(e._id)}}," Delete "),r.a.createElement("br",null),"DVD: "+(e.dvd?"Yes":"No"))}}]),n}(r.a.Component)),U=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.movies;return r.a.createElement("div",{id:"movies",className:"container col-sm-12"},r.a.createElement("ul",{className:"moviesList"},e.map((function(e){return r.a.createElement(B,{key:e._id,movie:e})}))))}}]),n}(r.a.Component),R=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.info;return r.a.createElement("div",{id:"imdbInfo",className:"col-sm-6 jumbotron pull-center"},"Title: "+e.Title,r.a.createElement("br",null),"Year: "+e.Year,r.a.createElement("br",null),"Runtime: "+e.Runtime,r.a.createElement("br",null),"Genre: "+e.Genre,r.a.createElement("br",null),"Director: "+e.Director,r.a.createElement("br",null),"Actors: "+e.Actors,r.a.createElement("br",null),"imdbRaiting: "+e.imdbRating)}}]),n}(r.a.Component),T=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"filterState",value:function(e){return{movieForm:e.movieForm,locationForm:e.locationForm,locationList:e.locationList}}},{key:"render",value:function(){var e=this.state,t=e.movieForm,n=e.locationForm,a=e.locationList;return r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("p",null," Search for a Movie "),r.a.createElement("input",{className:"movieForm",name:"name",type:"text",value:t.name,onChange:function(e){return y(e.target)}}),r.a.createElement(D,{classNam:"movieForm",locations:a,val:t.location}),r.a.createElement("br",null),r.a.createElement("label",{className:"movieForm"}," ",r.a.createElement("input",{type:"checkbox",name:"bluray",checked:t.bluray,className:"movieForm",onChange:function(e){return O(e.target)}})," Bluray "),r.a.createElement("label",{className:"movieForm"}," ",r.a.createElement("input",{type:"checkbox",name:"dvd",checked:n.dvd,className:"movieForm",onChange:function(e){return O(e.target)}})," DVD "),r.a.createElement("br",null),r.a.createElement("button",{id:"searchMovieBtn",onClick:L}," Search Movie"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null," Search by Location "),r.a.createElement(D,{classNam:"locationForm",locations:a,val:n.location}),r.a.createElement("br",null),r.a.createElement("button",{id:"searchLocationBtn",onClick:k}," Search by location "))}}]),n}(d),I=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).logoutUser=function(){a.props.history.push("/"),fetch("/logoutUser").then((function(e){p(),Object(f.setState)("cookie",!0)})).catch((function(e){alert(e)}))},a}return Object(l.a)(n,[{key:"render",value:function(){this.props.movies;return r.a.createElement("div",null,r.a.createElement(m.b,{to:"/deleted-movies",className:"btn btn-primary headerBar col-sm-2"}," View Deleted "),r.a.createElement(m.b,{to:"/add-movie",className:"btn btn-primary headerBar col-sm-2"}," Add Movie "),r.a.createElement("button",{className:"btn btn-primary headerBar col-sm-2",onClick:N}," Add Location "),r.a.createElement("button",{className:"btn btn-primary headerBar col-sm-2",onClick:S}," Delete Location "),r.a.createElement("button",{className:"btn btn-primary headerBar col-sm-2",onClick:g}," Clear Search "),r.a.createElement("button",{className:"btn btn-primary headerBar col-sm-2",onClick:this.logoutUser}," Log Out "),r.a.createElement("br",null),r.a.createElement("br",null))}}]),n}(r.a.Component),J=(n(38),function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).props.history.push("/main"),j(),a}return Object(l.a)(n,[{key:"filterState",value:function(e){return{imdbInfo:e.imdbInfo,movieList:e.movieList}}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.imdbInfo,n=e.movieList,a=this.props.history;return r.a.createElement("div",{className:"container"},r.a.createElement(h,{title:"Main Dashboard"}),r.a.createElement(I,{history:a}),r.a.createElement("div",{className:"jumbotron col-sm-12 pull-center"},r.a.createElement(T,null),"{}"!==JSON.stringify(t)&&r.a.createElement(R,{info:t})),r.a.createElement(U,{movies:n}))}}]),n}(d)),_=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(i.a)(this,n),a=t.call(this,e),fetch("/users/check-session").then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&e.currentUser&&Object(f.setState)("currentUser",e.currentUser),Object(f.setState)("cookie",!0)})).catch((function(e){alert(e)})),a}return Object(l.a)(n,[{key:"filterState",value:function(e){return{currentUser:e.currentUser,cookie:e.cookie}}}]),Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.currentUser;return!1===e.cookie?r.a.createElement("div",{className:"container"}," ",r.a.createElement(h,{title:"Loading"})," "):r.a.createElement(m.a,null,r.a.createElement(b.c,null," ",r.a.createElement(b.a,{exact:!0,path:"/deleted-movies",render:function(e){var n=e.history;return t?r.a.createElement(M,{history:n}):r.a.createElement(A,{history:n})}}),r.a.createElement(b.a,{exact:!0,path:"/add-movie",render:function(e){var n=e.history;return t?r.a.createElement(x,{history:n}):r.a.createElement(A,{history:n})}}),r.a.createElement(b.a,{exact:!0,path:["/","/login","/main"],render:function(e){var n=e.history;return t?r.a.createElement(J,{history:n}):r.a.createElement(A,{history:n})}}),r.a.createElement(b.a,{render:function(){return r.a.createElement("div",{className:"container"}," ",r.a.createElement(h,{title:"404 Not found"})," ")}})))}}]),n}(d);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));p(),Object(f.startLogging)(),c.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.314b2dff.chunk.js.map